# レコード更新 - items/{recordId}/update

## 概要

指定したレコードIDのレコードを更新します。

## 対応バージョン

- プリザンター 1.3.13.0以降
  - このライブラリの制約によるもの
- プリザンター 1.4.19.0以降: WikiでのImageHashを使用した画像の挿入機能
- プリザンター 1.1.36.0以降: レコードのアクセス制御の更新機能

## メソッド

```csharp
// パラメータ指定版
Task<ApiResponse<UpdateRecordResponse>> UpdateRecordAsync(
    long recordId,
    string? title = null,
    string? body = null,
    int? status = null,
    int? manager = null,
    int? owner = null,
    string? completionTime = null,
    Dictionary<string, string>? classHash = null,
    Dictionary<string, decimal>? numHash = null,
    Dictionary<string, DateTime>? dateHash = null,
    Dictionary<string, string>? descriptionHash = null,
    Dictionary<string, bool>? checkHash = null,
    Dictionary<string, List<AttachmentData>>? attachmentsHash = null,
    int? processId = null,
    List<int>? processIds = null,
    Dictionary<string, ImageSettings>? imageHash = null,
    List<string>? recordPermissions = null,
    TimeSpan? timeout = null)

// リクエストモデル版
Task<ApiResponse<UpdateRecordResponse>> UpdateRecordAsync(
    long recordId,
    UpdateRecordRequest request,
    TimeSpan? timeout = null)
```

## パラメータ

| 引数              | 型                                          | 必須 | 説明                               |
|-------------------|---------------------------------------------|:----:|------------------------------------|
| `recordId`        | long                                        | Yes  | レコードID（IssueIdまたはResultId） |
| `title`           | string                                      |      | タイトル                           |
| `body`            | string                                      |      | 内容                               |
| `status`          | int?                                        |      | 状況                               |
| `manager`         | int?                                        |      | 管理者                             |
| `owner`           | int?                                        |      | 担当者                             |
| `completionTime`  | string                                      |      | 完了日時                           |
| `classHash`       | Dictionary\<string, string\>                |      | 分類項目                           |
| `numHash`         | Dictionary\<string, decimal\>               |      | 数値項目                           |
| `dateHash`        | Dictionary\<string, DateTime\>              |      | 日付項目                           |
| `descriptionHash` | Dictionary\<string, string\>                |      | 説明項目                           |
| `checkHash`       | Dictionary\<string, bool\>                  |      | チェック項目                       |
| `attachmentsHash` | Dictionary\<string, List\<AttachmentData\>\> |      | 添付ファイル項目                   |
| `processId`       | int?                                        |      | プロセスID                         |
| `processIds`      | List\<int\>                                 |      | 複数のプロセスID                   |
| `imageHash`       | Dictionary\<string, ImageSettings\>         |      | 画像挿入設定                       |
| `recordPermissions`| List\<string\>                             |      | レコードのアクセス制御             |
| `timeout`         | TimeSpan?                                   |      | リクエストタイムアウト             |

## 使用例

### パラメータ指定版

```csharp
var result = await client.UpdateRecordAsync(
    recordId: 12345,
    title: "更新後のタイトル",
    body: "更新後の内容",
    status: 200
);

if (result.Success)
{
    Console.WriteLine($"レコードID: {result.Data.Id}");
    Console.WriteLine($"更新日時: {result.Data.UpdatedTime}");
}
```

### リクエストモデル版

```csharp
using PleasanterDeveloperCommunity.DotNet.Client.Models.Requests.Items;

// リクエストモデルを使用した更新
var request = new UpdateRecordRequest
{
    Title = "更新後のタイトル",
    Body = "更新後の内容",
    Status = 200,
    ClassHash = new Dictionary<string, string>
    {
        { "ClassA", "更新後の分類A" }
    }
};

var result = await client.UpdateRecordAsync(recordId: 12345, request: request);
```

### カスタム項目を含む更新

```csharp
var result = await client.UpdateRecordAsync(
    recordId: 12345,
    title: "更新後のタイトル",
    classHash: new Dictionary<string, string>
    {
        { "ClassA", "更新後の分類A" }
    },
    numHash: new Dictionary<string, decimal>
    {
        { "NumA", 999.99m }
    },
    dateHash: new Dictionary<string, DateTime>
    {
        { "DateA", new DateTime(2024, 12, 31) }
    },
    checkHash: new Dictionary<string, bool>
    {
        { "CheckA", true }
    }
);
```

## レスポンス

レスポンスの詳細については、[レスポンスの処理](00-レスポンスの処理)を参照してください。

### 成功時

```csharp
{
    "StatusCode": 200,
    "Success": true,
    "Data": {
        "Id": 12345,
        "StatusCode": 200,
        "Message": "更新しました。",
        "UpdatedTime": "2024-01-18T10:30:00Z"
    }
}
```

## 関連ドキュメント

- [レスポンスの処理](00-レスポンスの処理) - APIレスポンスの処理方法
- [単一レコード取得](01-テーブル操作-単一レコード取得)
- [レコード作成](01-テーブル操作-レコード作成)
- [レコード作成・更新](01-テーブル操作-レコード作成・更新)
