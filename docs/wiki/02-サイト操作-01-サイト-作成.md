# サイトの作成 - items/{parentSiteId}/createsite

## 概要

APIを使用して新しいサイト（フォルダ、期限付きテーブル、記録テーブル、Wiki）を作成します。

## 対応バージョン

- プリザンター 1.3.13.0以降
  - このライブラリの制約によるもの

## 制限事項

- テナント管理者権限が必要です

## メソッド

```csharp
// パラメータ指定版
Task<ApiResponse<CreateSiteResponse>> CreateSiteAsync(
    long parentSiteId,
    string title,
    SiteReferenceType referenceType,
    int? tenantId = null,
    long? inheritPermission = null,
    SiteSettings? siteSettings = null,
    TimeSpan? timeout = null)

// リクエストモデル版
Task<ApiResponse<CreateSiteResponse>> CreateSiteAsync(
    long parentSiteId,
    CreateSiteRequest request,
    TimeSpan? timeout = null)
```

## パラメータ

| 引数                | 型                | 必須 | 説明                                                         |
|---------------------|-------------------|:----:|--------------------------------------------------------------|
| `parentSiteId`      | long              | Yes  | 親サイトID（作成するサイトの親となるフォルダまたはサイトのID） |
| `title`             | string            | Yes  | サイトのタイトル                                             |
| `referenceType`     | SiteReferenceType | Yes  | 参照タイプ                                                   |
| `tenantId`          | int?              |      | テナントID                                                   |
| `inheritPermission` | long?             |      | アクセス権の継承元サイトID                                   |
| `siteSettings`      | SiteSettings?     |      | サイト設定（型安全なサイト設定クラス）                       |
| `timeout`           | TimeSpan?         |      | リクエストタイムアウト                                       |

## SiteReferenceType（参照タイプ）

| 値                         | 説明             |
|----------------------------|------------------|
| `SiteReferenceType.Sites`  | フォルダ         |
| `SiteReferenceType.Issues` | 期限付きテーブル |
| `SiteReferenceType.Results`| 記録テーブル     |
| `SiteReferenceType.Wikis`  | Wiki             |

## 使用例

### フォルダを作成

```csharp
using PleasanterDeveloperCommunity.DotNet.Client.Models.Requests.Types;

// フォルダを作成
var result = await client.CreateSiteAsync(
    parentSiteId: 1,  // 親サイトID
    title: "新しいフォルダ",
    referenceType: SiteReferenceType.Sites);

if (result.IsSuccess)
{
    Console.WriteLine($"作成されたサイトID: {result.Response?.Id}");
}
```

### 期限付きテーブルを作成

```csharp
using PleasanterDeveloperCommunity.DotNet.Client.Models.Requests.Types;

// 期限付きテーブル（Issues）を作成
var result = await client.CreateSiteAsync(
    parentSiteId: 1,
    title: "タスク管理",
    referenceType: SiteReferenceType.Issues);

if (result.IsSuccess)
{
    Console.WriteLine($"作成されたサイトID: {result.Response?.Id}");
}
```

### 記録テーブルを作成

```csharp
using PleasanterDeveloperCommunity.DotNet.Client.Models.Requests.Types;

// 記録テーブル（Results）を作成
var result = await client.CreateSiteAsync(
    parentSiteId: 1,
    title: "顧客マスタ",
    referenceType: SiteReferenceType.Results);

if (result.IsSuccess)
{
    Console.WriteLine($"作成されたサイトID: {result.Response?.Id}");
}
```

### Wikiを作成

```csharp
using PleasanterDeveloperCommunity.DotNet.Client.Models.Requests.Types;

// Wikiを作成
var result = await client.CreateSiteAsync(
    parentSiteId: 1,
    title: "プロジェクト概要",
    referenceType: SiteReferenceType.Wikis);

if (result.IsSuccess)
{
    Console.WriteLine($"作成されたサイトID: {result.Response?.Id}");
}
```

### アクセス権を継承してサイトを作成

```csharp
using PleasanterDeveloperCommunity.DotNet.Client.Models.Requests.Types;

// 特定のサイトからアクセス権を継承
var result = await client.CreateSiteAsync(
    parentSiteId: 1,
    title: "チームタスク",
    referenceType: SiteReferenceType.Issues,
    inheritPermission: 99999);  // アクセス権の継承元サイトID
```

### サイト設定を指定して作成

```csharp
using PleasanterDeveloperCommunity.DotNet.Client.Models.Common;
using PleasanterDeveloperCommunity.DotNet.Client.Models.Requests.Types;

// SiteSettingsクラスを使用して型安全にサイト設定を指定
var siteSettings = new SiteSettings
{
    Version = 1.017m,
    GridColumns = new List<string>
    {
        "IssueId",
        "TitleBody",
        "Status",
        "Manager",
        "Owner",
        "UpdatedTime"
    },
    EditorColumnHash = new Dictionary<string, List<string>>
    {
        ["General"] = new List<string>
        {
            "IssueId",
            "Ver",
            "Title",
            "Body",
            "StartTime",
            "CompletionTime",
            "Status",
            "Manager",
            "Owner",
            "Comments"
        }
    }
};

var result = await client.CreateSiteAsync(
    parentSiteId: 1,
    title: "カスタム設定テーブル",
    referenceType: SiteReferenceType.Issues,
    siteSettings: siteSettings);
```

### リクエストオブジェクトを使用して作成

```csharp
using PleasanterDeveloperCommunity.DotNet.Client.Models.Requests.Sites;
using PleasanterDeveloperCommunity.DotNet.Client.Models.Requests.Types;

var request = new CreateSiteRequest
{
    Title = "リクエストオブジェクト使用例",
    ReferenceType = SiteReferenceType.Results,
    InheritPermission = 99999,
    SiteSettings = new
    {
        ReferenceType = "Results"
    }
};

var result = await client.CreateSiteAsync(
    parentSiteId: 1,
    request: request);

if (result.IsSuccess)
{
    Console.WriteLine($"作成されたサイトID: {result.Response?.Id}");
}
```

## レスポンス

### CreateSiteResponse クラス

| プロパティ | 型 | 説明 |
|------|------|------|
| `Id` | long | 作成されたサイトのID |
| `LimitPerDate` | int? | 1日あたりのAPI呼び出し上限 |
| `LimitRemaining` | int? | 残りのAPI呼び出し回数 |
