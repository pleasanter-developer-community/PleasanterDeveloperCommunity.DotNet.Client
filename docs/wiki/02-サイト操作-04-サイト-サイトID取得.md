# サイトID取得（サイト名検索） - items/{siteId}/getclosestsiteid

## 概要

APIを使用してサイト名検索で該当サイトに最も近いサイトIDを取得します。

## 対応バージョン

- プリザンター 1.4.5.0以降

## 制限事項

- テナント管理者権限が必要です
- サイトの「サイト名」を検索します。サイトのタイトルではありません。

## メソッド

```csharp
// パラメータ指定版
Task<ApiResponse<GetClosestSiteIdResponse>> GetClosestSiteIdAsync(long siteId, List<string> findSiteNames, TimeSpan? timeout = null)

// リクエストモデル版
Task<ApiResponse<GetClosestSiteIdResponse>> GetClosestSiteIdAsync(long siteId, GetClosestSiteIdRequest request, TimeSpan? timeout = null)
```

## パラメータ

| 引数            | 型             | 必須 | 説明                             |
|-----------------|----------------|:----:|----------------------------------|
| `siteId`        | long           | Yes  | サイトID（検索を開始するサイトのID） |
| `findSiteNames` | List\<string\> | Yes  | 検索対象のサイト名の配列         |
| `timeout`       | TimeSpan?      |      | リクエストタイムアウト           |

## GetClosestSiteIdResponse クラス

| プロパティ | 型                       | 説明                             |
|------------|--------------------------|----------------------------------|
| `SiteId`   | long                     | サイトID（検索を開始したサイトのID） |
| `Data`     | List\<ClosestSiteIdData\> | 検索結果データ                   |

## ClosestSiteIdData クラス

| プロパティ | 型     | 説明                                                     |
|------------|--------|----------------------------------------------------------|
| `SiteName` | string | 検索したサイト名                                         |
| `SiteId`   | long   | サイトID（見つからなかった場合またはアクセス権が無い場合は-1） |

## 使用例

### 基本的な使用方法

```csharp
using PleasanterDeveloperCommunity.DotNet.Client;
using System.Collections.Generic;
using System.Net;

using var client = new PleasanterClient(
    baseUrl: "https://example.com/pleasanter",
    apiKey: "your-api-key"
);

// サイト名を指定してサイトIDを取得
var siteNames = new List<string> { "ParentSite", "HideSite" };
var response = await client.GetClosestSiteIdAsync(siteId: 12345, findSiteNames: siteNames);

if (response.StatusCode == HttpStatusCode.OK && response.Response?.Data != null)
{
    foreach (var data in response.Response.Data)
    {
        Console.WriteLine($"SiteName: {data.SiteName}, SiteId: {data.SiteId}");
        
        if (data.SiteId == -1)
        {
            Console.WriteLine("  → サイトが見つからないか、アクセス権がありません");
        }
    }
}
```
