# レコード一括削除 - items/{siteId}/bulkdelete

## 概要

指定したサイトIDのテーブルからレコードを一括削除します。

## 対応バージョン

- プリザンター 1.3.13.0以降
  - このライブラリの制約によるもの

## メソッド

```csharp
Task<ApiResponse<BulkDeleteRecordResponse>> BulkDeleteRecordAsync(
    long siteId,
    List<long>? selected = null,
    View? view = null,
    bool? all = null,
    bool? physicalDelete = null,
    TimeSpan? timeout = null)
```

## パラメータ

| 引数 | 型 | 必須 | 説明 |
|------|------|:----:|------|
| `siteId` | long | ✓ | サイトID |
| `selected` | List\<long\> | | 削除するレコードのIDリスト |
| `view` | View | | ビュー設定（削除対象のフィルタ条件） |
| `all` | bool? | | テーブルのすべてのレコードを一括削除する場合true |
| `physicalDelete` | bool? | | レコード削除と同時に変更履歴およびごみ箱から削除する場合はtrue |
| `timeout` | TimeSpan? | | リクエストタイムアウト |

## 使用例

### レコードIDを指定して削除

```csharp
var result = await client.BulkDeleteRecordAsync(
    siteId: 12345,
    selected: new List<long> { 135, 376 }
);

if (result.Success)
{
    Console.WriteLine($"サイトID: {result.Data.Id}");
    Console.WriteLine($"メッセージ: {result.Message}");
}
```

### フィルタ条件で絞って削除

```csharp
var result = await client.BulkDeleteRecordAsync(
    siteId: 12345,
    view: new View
    {
        ColumnFilterHash = new Dictionary<string, string>
        {
            { "Status", "[100,910]" }
        }
    }
);
```

### フィルタ条件で絞って物理削除

```csharp
var result = await client.BulkDeleteRecordAsync(
    siteId: 12345,
    view: new View
    {
        ColumnFilterHash = new Dictionary<string, string>
        {
            { "Status", "[100,910]" }
        }
    },
    physicalDelete: true
);
```

### すべてのレコードを削除

```csharp
var result = await client.BulkDeleteRecordAsync(
    siteId: 12345,
    all: true
);
```

### リクエストオブジェクトを使用した削除

```csharp
var request = new BulkDeleteRecordRequest
{
    Selected = new List<long> { 135, 376 },
    PhysicalDelete = true
};

var result = await client.BulkDeleteRecordAsync(siteId: 12345, request: request);

if (result.Success)
{
    Console.WriteLine($"サイトID: {result.Data.Id}");
    Console.WriteLine($"メッセージ: {result.Message}");
}
```

## レスポンス

### BulkDeleteRecordResponse

| プロパティ | 型 | 説明 |
|-----------|------|------|
| `Id` | long | 一括削除対象のサイトID |

### レスポンス例

```json
{
    "Id": 46010,
    "StatusCode": 200,
    "Message": "サンプルテーブル: 3 件 一括削除しました。"
}
```

### 物理削除時のレスポンス例

```json
{
    "Id": 46010,
    "StatusCode": 200,
    "Message": "2 件 物理削除しました。"
}
```

## 注意事項

- **この操作は元に戻せません。** 削除レコードや削除条件に細心の注意を払ってください。
- 削除前に `GetRecordsAsync` で削除対象のレコードを取得し、確認することを推奨します。
- `physicalDelete` を `true` にした場合、変更履歴およびごみ箱からも削除され、復元できなくなります。
- `selected`、`view`、`all` のいずれかを指定する必要があります。

## 関連ドキュメント

- [レスポンスの処理](00-レスポンスの処理) - APIレスポンスの処理方法
- [レコード削除](01-テーブル操作-レコード削除)
- [複数レコード取得](01-テーブル操作-複数レコード取得)
