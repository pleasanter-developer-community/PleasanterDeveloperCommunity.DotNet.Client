# サイトの取得 - items/{siteId}/getsite

## 概要

APIを使用してサイト情報を取得します。

## 対応バージョン

- プリザンター 1.3.13.0以降
  - このライブラリの制約によるもの

## 制限事項

- テナント管理者権限が必要です
- Wikiには対応していません

## メソッド

```csharp
Task<ApiResponse<GetSiteResponse>> GetSiteAsync(long siteId, TimeSpan? timeout = null)
```

## パラメータ

| 引数 | 型 | 必須 | 説明 |
|------|------|:----:|------|
| `siteId` | long | ✓ | サイトID（取得対象のサイトのID） |
| `timeout` | TimeSpan? | | リクエストタイムアウト |

## GetSiteResponse クラス

| プロパティ | 型 | 説明 |
|------|------|------|
| `Data` | GetSiteData | サイトデータ |

## GetSiteData クラス

| プロパティ | 型 | 説明 |
|------|------|------|
| `TenantId` | int | テナントID |
| `SiteId` | long | サイトID |
| `UpdatedTime` | DateTime? | 更新日時 |
| `Ver` | int | バージョン |
| `Title` | string? | タイトル |
| `Body` | string? | 内容 |
| `SiteName` | string? | サイト名 |
| `SiteGroupName` | string? | サイトグループ名 |
| `GridGuide` | string? | 一覧ガイド |
| `EditorGuide` | string? | エディタガイド |
| `CalendarGuide` | string? | カレンダーガイド |
| `CrosstabGuide` | string? | クロス集計ガイド |
| `GanttGuide` | string? | ガントチャートガイド |
| `BurnDownGuide` | string? | バーンダウンチャートガイド |
| `TimeSeriesGuide` | string? | 時系列チャートガイド |
| `KambanGuide` | string? | カンバンガイド |
| `ImageLibGuide` | string? | 画像ライブラリガイド |
| `ReferenceType` | string? | 参照タイプ（Sites, Issues, Results, Wikis） |
| `ParentId` | long | 親サイトID |
| `InheritPermission` | long | アクセス権の継承元サイトID |
| `Permissions` | List\<object\>? | アクセス権 |
| `SiteSettings` | SiteSettings? | サイト設定（型安全なサイト設定クラス） |
| `Publish` | bool | 公開フラグ |
| `DisableCrossSearch` | bool | クロスサイト検索無効フラグ |
| `LockedTime` | DateTime? | ロック日時 |
| `LockedUser` | int | ロックユーザID |
| `ApiCountDate` | DateTime? | API呼び出し日付 |
| `ApiCount` | int | API呼び出し回数 |
| `Comments` | string? | コメント |
| `Creator` | int | 作成者ID |
| `Updator` | int | 更新者ID |
| `CreatedTime` | DateTime? | 作成日時 |
| `ApiVersion` | float | APIバージョン |
| `ClassHash` | Dictionary\<string, string\>? | 分類項目 |
| `NumHash` | Dictionary\<string, decimal\>? | 数値項目 |
| `DateHash` | Dictionary\<string, DateTime\>? | 日付項目 |
| `DescriptionHash` | Dictionary\<string, string\>? | 説明項目 |
| `CheckHash` | Dictionary\<string, bool\>? | チェック項目 |
| `AttachmentsHash` | Dictionary\<string, object\>? | 添付ファイル項目 |

## 使用例

### サイト情報を取得

```csharp
// サイト情報を取得
var result = await client.GetSiteAsync(siteId: 12345);

if (result.IsSuccess)
{
    var site = result.Response?.Data;
    Console.WriteLine($"サイトID: {site?.SiteId}");
    Console.WriteLine($"タイトル: {site?.Title}");
    Console.WriteLine($"参照タイプ: {site?.ReferenceType}");
    Console.WriteLine($"親サイトID: {site?.ParentId}");
}
```

### サイト設定を取得

```csharp
using PleasanterDeveloperCommunity.DotNet.Client.Models.Common;

// サイト情報を取得してサイト設定を確認
var result = await client.GetSiteAsync(siteId: 12345);

if (result.IsSuccess)
{
    var site = result.Response?.Data;
    Console.WriteLine($"サイト名: {site?.SiteName}");
    Console.WriteLine($"公開状態: {(site?.Publish == true ? "公開" : "非公開")}");
    
    // SiteSettingsクラスとして型安全にアクセスできます
    if (site?.SiteSettings != null)
    {
        var settings = site.SiteSettings;
        Console.WriteLine($"バージョン: {settings.Version}");
        Console.WriteLine($"一覧列: {string.Join(", ", settings.GridColumns ?? new List<string>())}");
    }
}
```

### タイムアウトを指定して取得

```csharp
// 10秒のタイムアウトを指定してサイト情報を取得
var result = await client.GetSiteAsync(
    siteId: 12345,
    timeout: TimeSpan.FromSeconds(10));

if (result.IsSuccess)
{
    Console.WriteLine($"取得成功: {result.Response?.Data?.Title}");
}
else
{
    Console.WriteLine($"取得失敗: {result.Message}");
}
```

### エラーハンドリング

```csharp
var result = await client.GetSiteAsync(siteId: 12345);

if (result.IsSuccess)
{
    Console.WriteLine($"サイトタイトル: {result.Response?.Data?.Title}");
}
else
{
    Console.WriteLine($"エラー: {result.StatusCode} - {result.Message}");
}
```

## 関連ドキュメント

- [サイト作成](02-サイト操作-01-サイト-作成.md)
- [サイトコピー](02-サイト操作-02-サイト-コピー.md)
- [レスポンスの処理](00-レスポンスの処理.md)
