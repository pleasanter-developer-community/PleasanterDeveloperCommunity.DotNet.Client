# デモ環境の登録 - demo/register

## 概要

デモ環境を登録します。登録が完了すると、指定したメールアドレスにデモ環境のアクセス情報が送信されます。

## 対応バージョン

- プリザンター 1.3.13.0以降
  - このライブラリの制約によるもの

## 必要な設定

この機能を利用するには、プリザンターのパラメータ設定で `Service.DemoApi` を有効にする必要があります。

## メソッド

```csharp
// リクエストモデル版
Task<ApiResponse<RegisterDemoResponse>> RegisterDemoAsync(RegisterDemoRequest request, TimeSpan? timeout = null)

// パラメータ直接指定版
Task<ApiResponse<RegisterDemoResponse>> RegisterDemoAsync(string mailAddress, TimeSpan? timeout = null)
```

## パラメータ

### リクエストモデル版

| 引数 | 型 | 必須 | 説明 |
|------|------|:----:|------|
| `request` | RegisterDemoRequest | ✓ | デモ登録リクエスト |
| `timeout` | TimeSpan? | | リクエストタイムアウト |

### パラメータ直接指定版

| 引数 | 型 | 必須 | 説明 |
|------|------|:----:|------|
| `mailAddress` | string | ✓ | メールアドレス |
| `timeout` | TimeSpan? | | リクエストタイムアウト |

## リクエストモデル

### RegisterDemoRequest

| プロパティ | 型 | 必須 | 説明 |
|------------|------|:----:|------|
| `MailAddress` | string | ✓ | デモ環境のアクセス情報を送信するメールアドレス |

## 使用例

### 基本的な使い方（パラメータ直接指定）

```csharp
var result = await client.RegisterDemoAsync(
    mailAddress: "user@example.com");

if (result.IsSuccess)
{
    Console.WriteLine($"メッセージ: {result.Message}");
}
```

### リクエストモデルを使用

```csharp
using PleasanterDeveloperCommunity.DotNet.Client.Models.Requests.Demo;

var request = new RegisterDemoRequest
{
    MailAddress = "user@example.com"
};

var result = await client.RegisterDemoAsync(request);

if (result.IsSuccess)
{
    Console.WriteLine($"メッセージ: {result.Message}");
}
```

## レスポンス

### 成功時

```json
{
  "Id": 12345,
  "StatusCode": 200,
  "Message": "デモ環境を作成しました。メールを確認してください。"
}
```

### エラー時

```json
{
  "Id": 0,
  "StatusCode": 500,
  "Message": "DemoApiが無効です。"
}
```

## レスポンスモデル

### RegisterDemoResponse

| プロパティ | 型 | 説明 |
|------------|------|------|
| `Id` | long | 登録されたデモ環境のID |
| `StatusCode` | int | HTTPステータスコード |
| `Message` | string | メッセージ |

## レスポンスの処理

```csharp
var result = await client.RegisterDemoAsync("user@example.com");

if (result.IsSuccess)
{
    // 成功時の処理
    Console.WriteLine($"デモ環境ID: {result.Data.Id}");
    Console.WriteLine($"メッセージ: {result.Message}");
}
else
{
    // エラー時の処理
    Console.WriteLine($"エラー: {result.StatusCode} - {result.Message}");
}
```

## 注意事項

- この機能を利用するには、プリザンターのパラメータ設定で `Service.DemoApi` を有効にする必要があります
- 登録が完了すると、指定したメールアドレスにデモ環境のアクセス情報が送信されます
- デモ環境は一定期間後に自動的に削除される場合があります

## 関連項目

- [プリザンター公式マニュアル](https://pleasanter.org/ja/manual)
