# 複数レコード取得 - items/{siteId}/get

## 概要

指定したサイトIDの複数レコードを取得します。ページングに対応しています。

## 対応バージョン

- プリザンター 1.3.13.0以降
  - このライブラリの制約によるもの

## メソッド

```csharp
Task<ApiResponse<RecordsResponse>> GetRecordsAsync(long siteId, int? offset = null, View? view = null, TimeSpan? timeout = null)
Task<ApiResponse<RecordsResponse>> GetAllRecordsAsync(long siteId, View? view = null, TimeSpan? timeout = null)
```

## パラメータ

### GetRecordsAsync

| 引数 | 型 | 必須 | 説明 |
|------|------|:----:|------|
| `siteId` | long | ✓ | サイトID |
| `offset` | int? | | 取得開始位置（ページネーション用） |
| `view` | View | | ビュー設定（フィルタや並び替えなど） |
| `timeout` | TimeSpan? | | リクエストタイムアウト |

### GetAllRecordsAsync

| 引数 | 型 | 必須 | 説明 |
|------|------|:----:|------|
| `siteId` | long | ✓ | サイトID |
| `view` | View | | ビュー設定（フィルタや並び替えなど） |
| `timeout` | TimeSpan? | | リクエストタイムアウト |

## 使用例

```csharp
// 複数レコードの取得
var records = await client.GetRecordsAsync(siteId: 456);

// ページングを自動処理して全レコードを取得
var allRecords = await client.GetAllRecordsAsync(siteId: 456);
```

### ビュー設定を使用した取得

```csharp
using PleasanterDeveloperCommunity.DotNet.Client.Models.Requests;

var view = new View
{
    ColumnFilterHash = new Dictionary<string, string>
    {
        { "ClassA", "検索値" }
    },
    ColumnSorterHash = new Dictionary<string, SortOrderType>
    {
        { "CreatedTime", SortOrderType.Desc }
    }
};

var records = await client.GetRecordsAsync(siteId: 456, view: view);
```

## Viewクラスのプロパティ

| プロパティ | 型 | 説明 |
|-----------|------|------|
| `Incomplete` | bool? | 未完了のレコードのみ取得 |
| `Own` | bool? | 自分が担当のレコードのみ取得 |
| `NearCompletionTime` | bool? | 期限が近いレコードのみ取得 |
| `Delay` | bool? | 遅延しているレコードのみ取得 |
| `Overdue` | bool? | 期限超過のレコードのみ取得 |
| `Search` | string | 全文検索キーワード |
| `ColumnFilterHash` | Dictionary\<string, string\> | 列フィルタ設定（キー: 列名、値: フィルタ値） |
| `ColumnFilterSearchTypes` | Dictionary\<string, ColumnFilterSearchType\> | 列フィルタ検索タイプ |
| `ColumnFilterNegatives` | List\<string\> | 否定フィルタ対象の列名 |
| `ColumnSorterHash` | Dictionary\<string, SortOrderType\> | ソート設定（キー: 列名、値: Asc/Desc） |
| `ApiDataType` | ApiDataType? | APIデータタイプ |
| `ApiColumnKeyDisplayType` | ApiColumnKeyDisplayType? | APIカラムキー表示タイプ（KeyValues時のみ） |
| `ApiColumnValueDisplayType` | ApiColumnValueDisplayType? | APIカラム値表示タイプ（KeyValues時のみ） |
| `ApiColumnHash` | Dictionary\<string, ApiColumnSetting\> | 項目単位のKey/Value表示形式設定 |
| `GridColumns` | List\<string\> | 返却される項目を制御する配列 |
| `MergeSessionViewFilters` | bool? | セッションのフィルタ条件とマージするか |
| `MergeSessionViewSorters` | bool? | セッションのソート条件とマージするか |

## 列挙体

### SortOrderType - ソート順タイプ

| 値 | 説明 |
|------|------|
| `Asc` | 昇順 |
| `Desc` | 降順 |

### ColumnFilterSearchType - 列フィルタ検索タイプ

| 値 | 説明 |
|------|------|
| `PartialMatch` | 部分一致 |
| `ExactMatch` | 完全一致 |
| `ForwardMatch` | 前方一致 |
| `PartialMatchMultiple` | 部分一致（複数） |
| `ExactMatchMultiple` | 完全一致（複数） |
| `ForwardMatchMultiple` | 前方一致（複数） |

### ApiDataType - APIデータタイプ

| 値 | 説明 |
|------|------|
| `Default` | デフォルト（Keyはカラム名、Valueは値） |
| `KeyValues` | KeyValues形式（Keyは表示名、Valueは表示値） |

### ApiColumnKeyDisplayType - APIカラムキー表示タイプ

| 値 | 説明 |
|------|------|
| `LabelText` | 表示名 |
| `ColumnName` | カラム名 |

### ApiColumnValueDisplayType - APIカラム値表示タイプ

| 値 | 説明 |
|------|------|
| `DisplayValue` | 表示名 |
| `Value` | 値（データベース上に登録されている値） |
| `Text` | 書式や単位等も含めた値 |

## 関連ドキュメント

- [レスポンスの処理](00-レスポンスの処理) - APIレスポンスの処理方法、コメントの取得方法など
