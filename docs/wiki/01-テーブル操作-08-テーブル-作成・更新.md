# レコード作成・更新 - items/{siteId}/upsert

## 概要

キーに基づいてレコードを作成または更新します。キーに一致するレコードが存在する場合は更新、存在しない場合は新規作成します。

## 対応バージョン

- プリザンター 1.3.13.0以降
  - このライブラリの制約によるもの

## メソッド

```csharp
Task<ApiResponse<UpsertRecordResponse>> UpsertRecordAsync(
    long siteId,
    List<string> keys,
    string? title = null,
    string? body = null,
    int? status = null,
    int? manager = null,
    int? owner = null,
    string? completionTime = null,
    Dictionary<string, string>? classHash = null,
    Dictionary<string, decimal>? numHash = null,
    Dictionary<string, DateTime>? dateHash = null,
    Dictionary<string, string>? descriptionHash = null,
    Dictionary<string, bool>? checkHash = null,
    int? processId = null,
    List<int>? processIds = null,
    Dictionary<string, ImageSettings>? imageHash = null,
    TimeSpan? timeout = null)
```

## パラメータ

| 引数 | 型 | 必須 | 説明 |
|------|------|:----:|------|
| `siteId` | long | ✓ | サイトID |
| `keys` | List\<string\> | ✓ | キーとなる項目名の配列 |
| `title` | string | | タイトル |
| `body` | string | | 内容 |
| `status` | int? | | 状況 |
| `manager` | int? | | 管理者 |
| `owner` | int? | | 担当者 |
| `completionTime` | string | | 完了日時 |
| `classHash` | Dictionary\<string, string\> | | 分類項目 |
| `numHash` | Dictionary\<string, decimal\> | | 数値項目 |
| `dateHash` | Dictionary\<string, DateTime\> | | 日付項目 |
| `descriptionHash` | Dictionary\<string, string\> | | 説明項目 |
| `checkHash` | Dictionary\<string, bool\> | | チェック項目 |
| `processId` | int? | | プロセスID |
| `processIds` | List\<int\> | | 複数のプロセスID |
| `imageHash` | Dictionary\<string, ImageSettings\> | | 画像挿入設定 |
| `timeout` | TimeSpan? | | リクエストタイムアウト |

## 使用例

```csharp
// キーに基づいて作成または更新
var result = await client.UpsertRecordAsync(
    siteId: 456,
    keys: new List<string> { "ClassA" },
    title: "タイトル",
    classHash: new Dictionary<string, string>
    {
        { "ClassA", "キー値" }
    }
);
```

## 関連ドキュメント

- [レスポンスの処理](00-レスポンスの処理) - APIレスポンスの処理方法
- [レコード作成](01-テーブル操作-レコード作成)
- [レコード更新](01-テーブル操作-レコード更新)
- [レコード一括作成・更新](01-テーブル操作-レコード一括作成・更新)
