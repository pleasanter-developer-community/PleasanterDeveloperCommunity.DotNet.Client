# サイトの作成 - items/{parentSiteId}/createsite

## 概要

APIを使用して新しいサイト（フォルダ、期限付きテーブル、記録テーブル、Wiki）を作成します。

## 対応バージョン

- プリザンター 1.3.13.0以降
  - このライブラリの制約によるもの

## 制限事項

- テナント管理者権限が必要です

## メソッド

```csharp
// 通常版
Task<ApiResponse<CreateSiteResponse>> CreateSiteAsync(
    long parentSiteId,
    string title,
    string referenceType,
    int? tenantId = null,
    long? inheritPermission = null,
    object? siteSettings = null,
    TimeSpan? timeout = null)

// リクエストオブジェクト使用版
Task<ApiResponse<CreateSiteResponse>> CreateSiteAsync(long parentSiteId, CreateSiteRequest request, TimeSpan? timeout = null)
```

## パラメータ

### 通常版 (`CreateSiteAsync`)

| 引数 | 型 | 必須 | 説明 |
|------|------|:----:|------|
| `parentSiteId` | long | ✓ | 親サイトID（作成するサイトの親となるフォルダまたはサイトのID） |
| `title` | string | ✓ | サイトのタイトル |
| `referenceType` | string | ✓ | 参照タイプ（Sites, Issues, Results, Wikis のいずれか） |
| `tenantId` | int? | | テナントID |
| `inheritPermission` | long? | | アクセス権の継承元サイトID |
| `siteSettings` | object? | | サイト設定（サイトパッケージのSiteパラメータと同等の形式） |
| `timeout` | TimeSpan? | | リクエストタイムアウト |

### リクエストオブジェクト使用版 (`CreateSiteAsync`)

| 引数 | 型 | 必須 | 説明 |
|------|------|:----:|------|
| `parentSiteId` | long | ✓ | 親サイトID（作成するサイトの親となるフォルダまたはサイトのID） |
| `request` | CreateSiteRequest | ✓ | サイト作成リクエストオブジェクト |
| `timeout` | TimeSpan? | | リクエストタイムアウト |

## CreateSiteRequest クラス

| プロパティ | 型 | 必須 | 説明 |
|------|------|:----:|------|
| `TenantId` | int? | | テナントID |
| `Title` | string | ✓ | サイトのタイトル |
| `ReferenceType` | string | ✓ | 参照タイプ（Sites, Issues, Results, Wikis のいずれか） |
| `ParentId` | long? | | 親サイトID |
| `InheritPermission` | long? | | アクセス権の継承元サイトID |
| `SiteSettings` | object? | | サイト設定（サイトパッケージのSiteパラメータと同等の形式） |

## ReferenceType（参照タイプ）

| 値 | 説明 |
|------|------|
| `Sites` | フォルダ |
| `Issues` | 期限付きテーブル |
| `Results` | 記録テーブル |
| `Wikis` | Wiki |

## 使用例

### フォルダを作成

```csharp
// フォルダを作成
var result = await client.CreateSiteAsync(
    parentSiteId: 1,  // 親サイトID
    title: "新しいフォルダ",
    referenceType: "Sites");

if (result.IsSuccess)
{
    Console.WriteLine($"作成されたサイトID: {result.Response?.Id}");
}
```

### 期限付きテーブルを作成

```csharp
// 期限付きテーブル（Issues）を作成
var result = await client.CreateSiteAsync(
    parentSiteId: 1,
    title: "タスク管理",
    referenceType: "Issues");

if (result.IsSuccess)
{
    Console.WriteLine($"作成されたサイトID: {result.Response?.Id}");
}
```

### 記録テーブルを作成

```csharp
// 記録テーブル（Results）を作成
var result = await client.CreateSiteAsync(
    parentSiteId: 1,
    title: "顧客マスタ",
    referenceType: "Results");

if (result.IsSuccess)
{
    Console.WriteLine($"作成されたサイトID: {result.Response?.Id}");
}
```

### Wikiを作成

```csharp
// Wikiを作成
var result = await client.CreateSiteAsync(
    parentSiteId: 1,
    title: "プロジェクト概要",
    referenceType: "Wikis");

if (result.IsSuccess)
{
    Console.WriteLine($"作成されたサイトID: {result.Response?.Id}");
}
```

### アクセス権を継承してサイトを作成

```csharp
// 特定のサイトからアクセス権を継承
var result = await client.CreateSiteAsync(
    parentSiteId: 1,
    title: "チームタスク",
    referenceType: "Issues",
    inheritPermission: 99999);  // アクセス権の継承元サイトID
```

### サイト設定を指定して作成

```csharp
// サイト設定を含めて期限付きテーブルを作成
var siteSettings = new
{
    Version = 1.017,
    ReferenceType = "Issues",
    GridColumns = new[]
    {
        "IssueId",
        "TitleBody",
        "Status",
        "Manager",
        "Owner",
        "UpdatedTime"
    },
    EditorColumnHash = new
    {
        General = new[]
        {
            "IssueId",
            "Ver",
            "Title",
            "Body",
            "StartTime",
            "CompletionTime",
            "Status",
            "Manager",
            "Owner",
            "Comments"
        }
    }
};

var result = await client.CreateSiteAsync(
    parentSiteId: 1,
    title: "カスタム設定テーブル",
    referenceType: "Issues",
    siteSettings: siteSettings);
```

### リクエストオブジェクトを使用して作成

```csharp
using PleasanterDeveloperCommunity.DotNet.Client.Models.Requests.Sites;

var request = new CreateSiteRequest
{
    Title = "リクエストオブジェクト使用例",
    ReferenceType = "Results",
    InheritPermission = 99999,
    SiteSettings = new
    {
        ReferenceType = "Results"
    }
};

var result = await client.CreateSiteAsync(
    parentSiteId: 1,
    request: request);

if (result.IsSuccess)
{
    Console.WriteLine($"作成されたサイトID: {result.Response?.Id}");
}
```

## レスポンス

### CreateSiteResponse クラス

| プロパティ | 型 | 説明 |
|------|------|------|
| `Id` | long | 作成されたサイトのID |
| `LimitPerDate` | int? | 1日あたりのAPI呼び出し上限 |
| `LimitRemaining` | int? | 残りのAPI呼び出し回数 |
